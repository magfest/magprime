{% import 'macros.html' as macros %}
{% if c.HOTELS_ENABLED and c.PRE_CON %}
{% if c.HOTEL_LOTTERY_STAFF_START and c.BEFORE_HOTEL_LOTTERY_STAFF_DEADLINE and not attendee.selected_hotel_type %}
<li>
    {% if c.HOTEL_REQUESTS_URL %}
    <img src="{{ c.HOTEL_REQUESTS_URL }}/hotels/request_complete.png?id={{ attendee.id }}&event={{ c.EVENT_NAME }}{{ c.EVENT_YEAR }}" style="vertical-align:top ; margin-right:5px" height="20" width="20" />
    {% else %}
    {{ macros.checklist_image(attendee.hotel_requests) }}
    {% endif %}
    Please let us know whether you want to enter the staff pre-lottery or utilize staff crash space.
</li>
{% elif attendee.badge_type == c.STAFF_BADGE and not attendee.hotel_eligible %}
<li>
    {% if attendee.lottery_application and (attendee.lottery_application.status == c.COMPLETE or attendee.lottery_application.status in c.HOTEL_LOTTERY_AWARD_STATUSES) %}
        {% if attendee.lottery_application.is_staff_entry %}
        You are not eligible to request staff crash space because you have booked a room in the pre-lottery.
        {% else %}
        You are currently in the attendee lottery. You must <a href="../hotel_lottery/index?attendee_id={{ attendee.id }}" target="_blank">withdraw your lottery entry</a> to be eligible for staff crash space.
        {% endif %}
    {% else %}
    You are not eligible to request staff crash space.
    {% endif %}
    Please contact us at {{ c.STAFF_EMAIL|email_only|email_to_link }} if you have any questions.
</li>
{% elif attendee.hotel_eligible and c.AFTER_ROOM_DEADLINE and c.HAS_HOTEL_ADMIN_ACCESS %}
    <li>
        {% if c.HOTEL_REQUESTS_URL %}
            <img src="{{ c.HOTEL_REQUESTS_URL }}/hotels/request_complete.png?id={{ attendee.id }}&event={{ c.EVENT_NAME }}{{ c.EVENT_YEAR }}" style="vertical-align:top ; margin-right:5px" height="20" width="20" />
            The deadline for editing hotel requests has passed, but as a STOPS admin, you can still
            {% if attendee.hotel_requests %}
                <a href="{{ c.HOTEL_REQUESTS_URL }}/hotels/request?id={{ attendee.id }}&event={{ c.EVENT_NAME }}{{ c.EVENT_YEAR }}">edit</a>
            {% else %}
                <a href="{{ c.HOTEL_REQUESTS_URL }}/hotels/request?id={{ attendee.id }}&event={{ c.EVENT_NAME }}{{ c.EVENT_YEAR }}">fill out</a>
            {% endif %}
        {% else %}
            {{ macros.checklist_image(attendee.hotel_requests) }}
            The deadline for editing hotel requests has passed, but as a STOPS admin, you can still
            {% if attendee.hotel_requests %}
                <a href="hotel">edit</a>
            {% else %}
                <a href="hotel">fill out</a>
            {% endif %}
        {% endif %}
        this staffer's hotel room space requests.
    </li>
{% elif c.ROOM_DEADLINE and attendee.hotel_eligible and attendee.registered < c.ROOM_DEADLINE %}
    {% if c.BEFORE_ROOM_DEADLINE %}
        <li>
            {% if not attendee.placeholder and not attendee.hotel_requests %}
                {% if c.HOTEL_REQUESTS_URL %}
                    <img src="{{ c.HOTEL_REQUESTS_URL }}/hotels/request_complete.png?id={{ attendee.id }}&seed={{ range(65536) | random }}&event={{ c.EVENT_NAME }}{{ c.EVENT_YEAR }}" style="vertical-align:top ; margin-right:5px" height="20" width="20" />
                    <a href="{{ c.HOTEL_REQUESTS_URL }}/hotels/request?id={{ attendee.id }}&event={{ c.EVENT_NAME }}{{ c.EVENT_YEAR }}" target="_blank">Tell us</a>
                {% else %}
                    {{ macros.checklist_image(attendee.hotel_requests) }}
                    <a href="hotel">Tell us</a>
                {% endif %}
            {% else %}
            {{ macros.checklist_image(attendee.hotel_requests) }}
                Tell us
            {% endif %}
            whether you want hotel room space no later than <b>{{ c.ROOM_DEADLINE|datetime_local }}</b>.{% if c.STAFF_ROOM_FAQ_URL %} Please <a href="{{ c.STAFF_ROOM_FAQ_URL }}" target="_blank">review our FAQ</a> first.{% endif %}
            {% if attendee.hotel_requests %}
                {% if c.HOTEL_REQUESTS_URL %}
                    (you may <a href="{{ c.HOTEL_REQUESTS_URL }}/hotels/request?id={{ attendee.id }}&event={{ c.EVENT_NAME }}{{ c.EVENT_YEAR }}">edit your request</a> until then).
                {% else %}
                    (you may <a href="hotel">edit your request</a> until then).
                {% endif %}
            {% endif %}
            {% if attendee.lottery_application and (attendee.lottery_application.status == c.COMPLETE or attendee.lottery_application.status in c.HOTEL_LOTTERY_AWARD_STATUSES) %}
            Please note that <strong>you may only request nights not covered by your pre-lottery room</strong>.
            {% endif %}
        </li>
    {% else %}
        <li>
            {% if c.HOTEL_REQUESTS_URL %}
                <img src="{{ c.HOTEL_REQUESTS_URL }}/hotels/request_complete.png?id={{ attendee.id }}&event={{ c.EVENT_NAME }}{{ c.EVENT_YEAR }}" style="vertical-align:top ; margin-right:5px" height="20" width="20" />
            {% else %}
                {{ macros.checklist_image(attendee.hotel_requests) }}
            {% endif %}
            {% if attendee.hotel_requests %}
                Thanks for filling out the hotel space request form before the deadline.
            {% else %}
                {% if c.HOTEL_REQUESTS_URL %}
                    Hotel requests are now closed. Please contact STOPS if you have any questions.
                {% else %}
                    You didn't fill out the hotel request form before the deadline.
                {% endif %}
            {% endif %}
        </li>
    {% endif %}
{% endif %}
{% endif %}
